Opera Preferences version 2.1
; Do not edit this file while Opera is running
; This file is stored in UTF-8 encoding

[Version]
File Version=15

[Info]
NAME=OperaU Toolbar
Description=Opera SimpleU Standard Toolbar Setup
Author=KwokTree
Version=1

[Status Toolbar Tail.content]
MinimizedUpdate
Button, "Proxy 弹出新标签的方式"="Disable proxy servers, , , "Proxy Disable", "No Security" > Open url in new page, "opera:config" & Delay, 10 & Go to page, "javascript:var allExc=opera.getPreference('Proxy','No Proxy Servers'),usePAC='proxy_type.pac',useALL='proxy_type.all';if(allExc.indexOf(usePAC)==-1 && allExc.indexOf(useALL)==-1){opera.setPreference('Proxy','Use FTP',1);opera.setPreference('Proxy','Use GOPHER',1);opera.setPreference('Proxy','Use HTTP',1);opera.setPreference('Proxy','Use HTTPS',1);opera.setPreference('Proxy','Use WAIS',1);opera.setPreference('Proxy','Use Automatic Proxy Configuration',1)}else if(allExc.indexOf(usePAC)!=-1){opera.setPreference('Proxy','Use Automatic Proxy Configuration',1)}else{opera.setPreference('Proxy','Use FTP',1);opera.setPreference('Proxy','Use GOPHER',1);opera.setPreference('Proxy','Use HTTP',1);opera.setPreference('Proxy','Use HTTPS',1);opera.setPreference('Proxy','Use WAIS',1)}window.close()" & External action > Set preference, "Proxy|Use Automatic Proxy Configuration=1", , "Proxy Auto", "Link Busy.mini" > Set preference, "Proxy|HTTP server=127.0.0.1:1234", , "Proxy Enabled - 1234", "wito" > Set preference, "Proxy|HTTP server=127.0.0.1:1984", , "Proxy Enabled - 1984", "puff" > Set preference, "Proxy|HTTP server=127.0.0.1:8000", , "Proxy Enabled - 8000", "gapp" > Set preference, "Proxy|HTTP server=127.0.0.1:8087", , "Proxy Enabled - 8087", "goagent" > Set preference, "Proxy|HTTP server=127.0.0.1:8080", , "Proxy Enabled - 8080", "proxo" > Set preference, "Proxy|HTTP server=127.0.0.1:8081", , "Proxy Enabled - 8081", "gtu" > Set preference, "Proxy|HTTP server=127.0.0.1:8086", , "Proxy Enabled - 8086", "wapp" > Set preference, "Proxy|HTTP server=127.0.0.1:8118", , "Proxy Enabled - 8118", "p" > Set preference, "Proxy|HTTP server=127.0.0.1:8580", , "Proxy Enabled - 8580", "fg" > Set preference, "Proxy|HTTP server=127.0.0.1:9666", , "Proxy Enabled - 9666", "wj" > Set preference, "Proxy|HTTP server=127.0.0.1:48100", , "Proxy Enabled - 48100", "hyk" > Set preference, "Proxy|HTTP server=127.0.0.1:9051", , "Proxy Enabled - 9051", "tor" > Set preference, "Proxy|Use HTTP=1", , "Proxy Enabled - Other", "Who Is.mini" + Show popup menu, "Simple Proxy Menu""
Button, "后台打开/个人栏"="Set preference, "User Prefs|Target Destination=2", , , "foreground" | Set preference, "User Prefs|Target Destination=0", , , "Search Folder" + Set alignment, "Personalbar Inline", 6,,"view" | Set alignment, "Personalbar Inline", 0,,"view""
Platform Windows, Button, "静音"="Execute program, "optools\nircmd.exe", "mutesysvolume 2", "静音", "Media Sound On" + Execute program, "mmsys.cpl",,, "Media Sound Off""
NamedZoomMenuButton, tbb_ZoomMenu
ZoomSlider
Button, "侧边栏"="Set alignment, "Site Navigation Toolbar", 3, "侧边栏", "Panels" | Set alignment, "Site Navigation Toolbar", , , "Panels.selected""

[Status Toolbar Head.content]
Button, tbb_Panel, M_BROWSER_VIEW_MENU_PANELS="Set alignment, "hotlist", 6,,"Panels" | Set alignment, "hotlist", 0,,"Panels""
Button="Identify as, , , 80362, "Opera Logo" > Identify as, 1, , 80363, "Contact37" > Identify as, 4, , 80364, "Trust Information" + Show popup menu, "Simple UA Menu""
Button, "用户脚本,CSS,URL过滤_启用中"="Go to page, "javascript:setTimeout(function(){if(true){location.reload();};},200);void(0);", , "用户脚本,CSS,URL过滤_禁用中", "Transfer Loading" & Go to page, "opera:config" & Delay, 10 & Go to page, "javascript:(function(){var sDisable='_Disable', sFolder=opera.getPreference('User Prefs','User JavaScript File');if(sFolder.indexOf(sDisable)>=0){sFolder=sFolder.replace(sDisable,'');opera.setPreference('User Prefs','User JavaScript',1);opera.setPreference('author display mode','user css',1);opera.setPreference('Network','Enable Content Blocker',1);}else{sFolder+=sDisable;opera.setPreference('User Prefs','User JavaScript',0);opera.setPreference('author display mode','user css',0);opera.setPreference('Network','Enable Content Blocker',0);}opera.setPreference('User Prefs','User JavaScript File',sFolder);window.close()})();" > Set preference, "User Prefs|User JavaScript=1", , "用户脚本,CSS,URL过滤_启用中", "Geolocation" + Show popup menu, "Simple AdbDetails Menu""
Button, "下载"="Manage, "transfers", , "下载", "Transfer Default" + Execute program, "explorer.exe", "optools", , "Target Folder""
Spacer1, 2
NamedStatus, tbb_Status

[Zoom Toolbar.content]
Label, 字号修改：
Button, "西字推荐 9"="Set preference, "User Prefs|Minimum Font Size=9""
Button, "中字推荐 12"="Set preference, "User Prefs|Minimum Font Size=12""
Button, "放大字号 15"="Set preference, "User Prefs|Minimum Font Size=15""
Button, "放大字号 18"="Set preference, "User Prefs|Minimum Font Size=18""
Button, "放大字号 22"="Set preference, "User Prefs|Minimum Font Size=22""
Spacer1, 2
Button, "平滑滚动"="Set preference, "user prefs|Smooth Scrolling=1", , "平滑滚动已启用", "Expand Enabled" > Set preference, "user prefs|Smooth Scrolling=0", , "平滑滚动已关闭", "Expand Disabled""
NamedButton, tbb_ShowImages, M_IMAGE_MENU_SHOW=Enable display images > Disable display images,,,M_IMAGE_MENU_NO > Display cached images only,,,M_IMAGE_MENU_CACHED
NamedButton, tbb_FitToWidth, M_BROWSER_VIEW_MENU_MEDIUM_SCREEN=Enable mediumscreen mode | Disable mediumscreen mode
Spacer1, 2
Label, S_ZOOM_SLIDER_CAPTION
NamedButton, tbb_ZoomTo100, MI_IDM_ZOOM_100 = Zoom to, 100
Button, "放大"="Zoom in, 10, , , "Zoomd""
Button, "缩小"="Zoom out, 10, , , "Zoomx""

[Pagebar Floating.content]
Button, "新建标签"=New page, , , "新建标签" + Show hidden popup menu & Go to page, "http://hao.360.cn/" & Focus address field & Paste & Go & Switch to previous page

[Document Toolbar.content]
ButtonSet, Combined Back Forward
NamedButton, tbb_Wand, S_WAND_TOOLBAR_BUTTON_TEXT="Wand | Fast Forward, 0 + Show hidden popup menu, "Internal Fast Forward History""
NamedButton, tbb_Stop_Reload, SI_STOP_BUTTON_TEXT=Stop | Reload, , , SI_RELOAD_BUTTON_TEXT + Show popup menu, "Full Reload Menu""
Button, "高亮对应书签/添加书签"="Highlight bookmark, , , "高亮对应书签", "Remove from Favorites" > Add to bookmarks, , , , "New Bookmark" + Show popup menu, "Browser Bookmarks Menu""
NamedAddress, tba_address_field
Platform Windows, Button, "兼容模式-View in IE"="Go to page, "javascript:(function(){var h=location.href;if(!h||/^(javascript|about|opera):/i.test(h)){return}window.open().document.write('<html>'+'<head>'+'<title>'+(document.title?document.title:location.href).replace(/</g,'&lt;')+' - view in ie</title>'+'<style type=\x22text/css\x22>body{margin:0;padding:0;}embed{width:100\x25;height:100\x25;}</style>'+'</head>'+'<body>'+'<script type=\x22text/javascript\x22'+'src=\x22data:text/javascript,'+encodeURIComponent('document.write(\'<embed type=\x22application/viewinie\x22 param-location=\x22'+location.href+'\x22></embed>\');')+'\x22>'+'</script>'+'</body>'+'</html>')})();", , "调用IE内核", "iemode" + Copy document address & Close page & New private page & Paste and go,,,"ie""
Platform Windows, Button, "记事本"="Execute program, "notepad.exe", "profile\Note.txt", "记事本", "note" + Show popup menu, "Simple WinTools Menu""
NamedMultiresizesearch, tbs_MainSearch
Button, "Readability"="Go to page, "javascript:X_readability();", , "Readability", "Panel Contacts Inverted" + Go to page, "javascript:((function()%7Bwindow.baseUrl%3D'http%3A//www.readability.com'%3Bwindow.readabilityToken%3D''%3Bvar%20s%3Ddocument.createElement('script')%3Bs.setAttribute('type'%2C'text/javascript')%3Bs.setAttribute('charset'%2C'UTF-8')%3Bs.setAttribute('src'%2CbaseUrl%2B'/bookmarklet/read.js')%3Bdocument.documentElement.appendChild(s)%3B%7D)())", 1, , "Panel Contacts Inverted""
Button, "护眼绿"="Select user CSS file, 4, , "护眼绿", "Window Speed Dial Icon" > Deselect user CSS file, 4, , "护眼绿", "Mail Compose Text Color""
ExtensionSet

[Site Navigation Toolbar.content]
Button, "护眼灰"="Select user CSS file, 3, , "护眼灰", "Window Speed Dial Icon" > Deselect user CSS file, 3, , "护眼灰", "Mail Compose Text Color""
Button, "页面变暗"="Go to page, "javascript:(function () {var dark_layer = null; if(!(dark_layer = document.getElementById('dark_layer'))) {var oDiv = document.createElement('div'); oDiv.id = 'dark_layer'; var pageHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, window.innerHeight); oDiv.style = 'position: absolute; top: 0; left: 0; width: 1px; height: ' + pageHeight + 'px; outline:rgba(0,0,0,0.2) solid 3000px;';document.body.appendChild(oDiv);} else {document.body.removeChild(dark_layer);} })();", , "", "Panel Contacts Inverted""
Button, "skydrive永久链"="Go to page, "javascript:void(function(z,a){(a=z('.sd_link_display'))&&(a=(a.value.match(/resid=.*?&/)||'0')[0].slice(6,-1))?prompt('SkyDrive外链获取成功, 请手动复制:','http://storage.live.com/items/'+a+'?filename='+encodeURI((z('.sd_header').innerHTML.match(/".*"/)||'0')[0].slice(1,-1))):alert('SkyDrive外链获取失败.')}(function(z){return document.querySelector(z)}))", , "skydrive永久链", "Save""
Button, "优酷土豆"="External action, , , "优酷土豆", "search" | Go to page, "javascript:void(inivar='%c')" & Go to page, "javascript:void(inivar2='%t')" & Go to page, "javascript:(function(){var d=window.inivar;if(!d){d=''};var getText=function(w){var u=w.document,v=u.getSelection(),t=u.querySelectorAll('textarea,input');if(!v)for(var i=0,e;e=t[i];i++){if(v=e.value.substring(e.selectionStart,e.selectionEnd))break}return v};var getSel=function(w){var rez=w?getText(w):'';if(rez==''){for(var i=0,f;f=w.frames[i];i++){try{if(rez=arguments.callee(f))break}catch(e){}}};return rez};var w=window;var q=getSel(w)||window.inivar2;if(!q){q=prompt('y:youku & t:tudou',' ')};if(q){if(location.hostname!=''){}else{window.close()};if(q.match(/\s(y|t)$/i)){x=q.substring(0,(q.length-2));}else if(q.match(/^(y|t|\s+)$/i)){x=d}else{x=q};if(x.match(/^(\s+)?$/i)){x=d};x=x.replace(/^\s+|\s+$/g,'');if(!x){return};var yk='http://www.soku.com/search_video/q_'+x.replace(/ /g,'+');var td='http://so.tudou.com/isearch/'+encodeURIComponent(x).replace(/ /g,'+');if(q.match(/(\s|^)y$/i)){window.open(yk);}else if(q.match(/(\s|^)t$/i)){window.open(td)}else{setTimeout(function(){window.open(td).blur();}, 10);setTimeout(function(){window.open(yk);}, 10);}}})()", , , "none" + Go to page, "javascript:void(window.open('opera:cache?domain='+(function(d){if(/^(?:\d{1,3}\.){3}\d{1,3}$/.test(d))return d;var a=d.split('.');var l=a.length;return(l<3)?d:(a[l-2]+'.'+a[l-1])})(location.hostname)+'&list=preview'));",,,"find""
Button, "分割"=Go to page, "javascript:(function(f){if(f)if(f.rows){f.cols=f.rows;f.removeAttribute('rows')}else{ f.rows=f.cols;f.removeAttribute('cols')}else{var w=window,d=document,html=d.documentElement.outerHTML;d.write('<title>'+d.title+'</title><frameset rows=\'50%,50%'+'\' id=\'fset__\'><frame id=\'f1\'><frame id=\'f2\'></frameset>');w.f1.document.write(html);w.f2.document.write(html)}})(window.fset__)", 1, "分割(H+V)", "Tile vertically" + Reload

[Pagebar Tail.content]
Platform Windows, Button, "FSCapture"="Execute program, "optools\FSCapture\FSCLoader.exe","Shift+PrtSc",,"FSCapture" + Show popup menu, "FSCapture""
Button, M_IMAGE_MENU_SHOW="Enable display images > Disable display images,,,M_IMAGE_MENU_NO > Display cached images only,,,M_IMAGE_MENU_CACHED + Show popup menu, "Images And Style Menu""
NamedTrashBinButton, tbb_ClosedTabs, M_CLOSED="Show popup menu, "SimpleU Closed Menu", , , "Trash large" + Execute program, "optools\empty.exe", "opera.exe", , "empty""

[Transfers Full Toolbar.content]
Button, SI_TRANSFER_STOP_BUTTON_TEXT=Stop transfer | Resume transfer,,,SI_TRANSFER_RESUME_BUTTON_TEXT
Button, SI_TRANSFER_RETRANSFER_BUTTON_TEXT=Restart transfer
Button, 827467700="Open transfer folder, , , , "Open Document" + Execute program, "explorer.exe", ".", , "Opera Logo""
Spacer, 0
Edit=Download URL,,,M_PANEL_QUICK
Spacer1, 1
Button, SI_VIEW_BUTTON_TEXT="Show popup menu, "Transfers View Popup Menu",,,"View""

[Customize Toolbar Custom.content]
Button, "布局切换"=Disable menu bar & Set alignment, "personalbar inline", 0 & Set alignment, "personalbar", 0 & Set alignment, "pagebar", 2 & Set alignment, "document toolbar", 2 & Set alignment, "status toolbar", 0 & Set alignment, "document view toolbar", 0 &Set alignment, "browser toolbar", 0 &Set alignment, "Start Toolbar", 0 &Set alignment, "site navigation toolbar", 0 | Disable menu bar & Set alignment, "personalbar inline", 0 & Set alignment, "personalbar", 0 & Set alignment, "pagebar", 4 & Set alignment, "document toolbar", 2 & Set alignment, "status toolbar", 0 & Set alignment, "document view toolbar", 0 &Set alignment, "browser toolbar", 0 &Set alignment, "Start Toolbar", 0 &Set alignment, "site navigation toolbar", 0
Button, "插件按需加载"="New page, , , "插件按需加载模式已关闭", "Media Play" & Restore page & Go to page, "opera:config" & Delay, 1 & Go to page, "javascript:(function(){var oh=opera.getPreference('User Prefs','Enable On Demand Plugin'),yeah=1-oh;opera.setPreference('User Prefs','Enable On Demand Plugin',yeah);window.close()})();" & Delay, 300 & Refresh display > Set preference, "User Prefs|Enable On Demand Plugin=1", , "插件按需加载模式已开启", "Media Pause""
Button, "皮肤及色调"="Show popup menu, "Internal skin list", , "皮肤及色调", "Change Nickname" + Show popup menu, "Color Scheme Menu""
;Button, "fav"="Go to page, "javascript: (function(){ function stringToData(s){ if(s == null) return; s = s.replace(/\\/g, '').replace(/^%22/,'').replace(/%22$/,''); return JSON.parse(s); } function update_data(index, title, url){ var titleArr = stringToData(localStorage.getItem('js_fav_title')); var urlArr = stringToData(localStorage.getItem('js_fav_url')); if(titleArr == null || urlArr == null) return; titleArr[index] = title; urlArr[index] = url; localStorage.setItem('js_fav_title', JSON.stringify(titleArr)); localStorage.setItem('js_fav_url', JSON.stringify(urlArr)); } function check_exist(data, dataArr){ var i; for(i = 0; i < dataArr.length; i++){ if(data == dataArr[i]) return true; } return false; } function add_data(title, url){ var titleArr = stringToData(localStorage.getItem('js_fav_title')) || new Array(); var urlArr = stringToData(localStorage.getItem('js_fav_url')) || new Array(); if(check_exist(url, urlArr)){ return false; } titleArr.push(title); urlArr.push(url); localStorage.setItem('js_fav_title', JSON.stringify(titleArr)); localStorage.setItem('js_fav_url', JSON.stringify(urlArr)); return true; } function delete_data(index){ var titleArr = stringToData(localStorage.getItem('js_fav_title')); var urlArr = stringToData(localStorage.getItem('js_fav_url')); titleArr.splice(index, 1); urlArr.splice(index, 1); if(titleArr == ''){ clear_data(); } else{ localStorage.setItem('js_fav_title', JSON.stringify(titleArr)); localStorage.setItem('js_fav_url', JSON.stringify(urlArr)); } } function read_data(){ return { titleArr : stringToData(localStorage.getItem('js_fav_title')), urlArr : stringToData(localStorage.getItem('js_fav_url')) } } function clear_data(){ localStorage.removeItem('js_fav_title'); localStorage.removeItem('js_fav_url'); } function create_element(type, id, clsId, style){ var ele = document.createElement(type); if(id != '' && id != null) ele.id = id; if(clsId != '' && clsId != null) ele.className = clsId; if(style != '' && style != null) ele.style = style; return ele; } function create_dialog(content){ if(content == null || typeof content == 'undefined') return; var dBody = create_element('div', 'fav_body', null, 'max-height: 500px; min-width: 260px; max-width: 700px; border-radius: 5px; box-shadow: 0px 0px 5px; background-color: white; position: absolute; z-index: 99999;'); var bClose = create_element('div', 'fav_close', null, 'width: 16px; height: 16px; background-image: url(%22http://cdn.iconfinder.net/data/icons/lynx/16x16/actions/dialog-close.png%22); float: right; margin-top: -8px; margin-right: -8px; margin-left: 20px;'); var bClear = create_element('div', 'fav_clear', null, 'width: 16px; height: 16px; background-image: url(%22http://cdn.iconfinder.net/data/icons/aspneticons_v1.0_Nov2006/trash_(delete)_16x16.gif%22); float: right; margin-top: -8px; margin-right: -8px; margin-left: 20px;'); bClose.onclick = function(){this.parentNode.parentNode.removeChild(this.parentNode)}; bClear.onclick = function(){var ret = confirm('是否清空收藏内容'); if(ret){clear_data(); bClose.click()}}; dBody.appendChild(bClose); dBody.appendChild(bClear); dBody.appendChild(content); document.body.appendChild(dBody); dBody.style.left = (innerWidth - dBody.offsetWidth) / 2 + 'px'; dBody.style.top = pageYOffset + (innerHeight - dBody.offsetHeight) / 2 + 'px'; } function show_fav_address(){ var i; var info = read_data(); if(info.titleArr != null){ var content = create_element('div', 'fav_content', null, 'max-height: 460px; max-width: 680px; margin: 10px; overflow-y: auto; overflow-x: hidden;'); for(i = 0; i < info.titleArr.length; i++){ var div = create_element('div', null, null, 'text-align: left;'); var a = create_element('a', null, null, 'max-width: 625px; display: inline-block; overflow:hidden;text-overflow:ellipsis;white-space:nowrap; border: none;' + ((location.href == info.urlArr[i]) ? 'color: #66cc33;' : 'color: #45b2ff;')); a.href = info.urlArr[i]; a.innerHTML = info.titleArr[i]; a.onmouseover = function(){this.style.color = '#ff45b2'; this.style.border = 'none';}; a.onmouseout = function(){this.style.color = ((location.href == this.href) ? '#66cc33' : '#45b2ff');}; var img = create_element('img', null, null, 'float: right;'); img.src = 'http://cdn.iconfinder.net/data/icons/uidesignicons/delete.png'; img.align = 'top'; img.onclick = function(){ var index = 0; var ret = confirm('是否删除该条目'); if(!ret) return; var imgs = document.getElementById('fav_body').getElementsByTagName('img'); for(index = 0; index < imgs.length; index++){ if(imgs[index] == this) break; } index = index / 2; delete_data(index); this.parentNode.parentNode.removeChild(this.parentNode); if(read_data().titleArr == null) document.getElementById('fav_close').click(); }; var img2 = create_element('img', null, null, 'float: right'); img2.src = 'http://cdn.iconfinder.net/data/icons/uidesignicons/settings.png'; img2.align = 'top'; img2.onclick = function(){ var index = 0; var imgs = document.getElementById('fav_body').getElementsByTagName('img'); for(index = 0; index < imgs.length; index++){ if(imgs[index] == this) break; } index = ((index + 1) / 2) - 1; var title = prompt('编辑标题', info.titleArr[index]); if(title == null) return; var url = prompt('编辑地址', info.urlArr[index]); if(url == null) return; info.titleArr[index] = title; info.urlArr[index] = url; update_data(index, title, url); alert('修改成功'); this.parentNode.getElementsByTagName('a')[0].innerHTML = title; this.parentNode.getElementsByTagName('a')[0].href = url; }; var br = create_element('br', null, null, null); div.appendChild(a); div.appendChild(img); div.appendChild(img2); div.appendChild(br.cloneNode(true)); content.appendChild(div); } create_dialog(content); } else alert('该站点没有收藏内容...'); } function add_fav_address(){ var url = location.href; var title = prompt('请输入标题', document.getSelection() || document.title); if(title == null) return; if(add_data(title, url) == true) alert('保存成功'); else alert('已经存在'); } var ret = confirm('是否添加新的站点收藏'); if(ret) add_fav_address(); else show_fav_address(); })();", 1, "fav", "Add To Bookmarks""
;Button, "fav_open"="Go to page, "javascript: (function(){ function stringToData(s){ if(s == null) return; s = s.replace(/\\/g, '').replace(/^%22/,'').replace(/%22$/,''); return JSON.parse(s); } function update_data(index, title, url){ var titleArr = stringToData(localStorage.getItem('js_fav_title')); var urlArr = stringToData(localStorage.getItem('js_fav_url')); if(titleArr == null || urlArr == null) return; titleArr[index] = title; urlArr[index] = url; localStorage.setItem('js_fav_title', JSON.stringify(titleArr)); localStorage.setItem('js_fav_url', JSON.stringify(urlArr)); } function check_exist(data, dataArr){ var i; for(i = 0; i < dataArr.length; i++){ if(data == dataArr[i]) return true; } return false; } function delete_data(index){ var titleArr = stringToData(localStorage.getItem('js_fav_title')); var urlArr = stringToData(localStorage.getItem('js_fav_url')); titleArr.splice(index, 1); urlArr.splice(index, 1); if(titleArr == ''){ clear_data(); } else{ localStorage.setItem('js_fav_title', JSON.stringify(titleArr)); localStorage.setItem('js_fav_url', JSON.stringify(urlArr)); } } function read_data(){ return { titleArr : stringToData(localStorage.getItem('js_fav_title')), urlArr : stringToData(localStorage.getItem('js_fav_url')) } } function clear_data(){ localStorage.removeItem('js_fav_title'); localStorage.removeItem('js_fav_url'); } function create_element(type, id, clsId, style){ var ele = document.createElement(type); if(id != '' && id != null) ele.id = id; if(clsId != '' && clsId != null) ele.className = clsId; if(style != '' && style != null) ele.style = style; return ele; } function create_dialog(content){ if(content == null || typeof content == 'undefined') return; var dBody = create_element('div', 'fav_body', null, 'max-height: 500px; min-width: 260px; max-width: 700px; border-radius: 5px; box-shadow: 0px 0px 5px; background-color: white; position: absolute; z-index: 99999;'); var bClose = create_element('div', 'fav_close', null, 'width: 16px; height: 16px; background-image: url(%22http://cdn.iconfinder.net/data/icons/lynx/16x16/actions/dialog-close.png%22); float: right; margin-top: -8px; margin-right: -8px; margin-left: 20px;'); var bClear = create_element('div', 'fav_clear', null, 'width: 16px; height: 16px; background-image:-o-skin("Attachment Music"); float: right; margin-top: -8px; margin-right: -8px; margin-left: 20px;'); bClose.onclick = function(){this.parentNode.parentNode.removeChild(this.parentNode)}; bClear.onclick = function(){var ret = confirm('是否清空收藏内容'); if(ret){clear_data(); bClose.click()}}; dBody.appendChild(bClose); dBody.appendChild(bClear); dBody.appendChild(content); document.body.appendChild(dBody); dBody.style.left = (innerWidth - dBody.offsetWidth) / 2 + 'px'; dBody.style.top = pageYOffset + (innerHeight - dBody.offsetHeight) / 2 + 'px'; } function show_fav_address(){ var i; var info = read_data(); if(info.titleArr != null){ var content = create_element('div', 'fav_content', null, 'max-height: 460px; max-width: 680px; margin: 10px; overflow-y: auto; overflow-x: hidden;'); for(i = 0; i < info.titleArr.length; i++){ var div = create_element('div', null, null, 'text-align: left;'); var a = create_element('a', null, null, 'max-width: 625px; display: inline-block; overflow:hidden;text-overflow:ellipsis;white-space:nowrap; border: none;' + ((location.href == info.urlArr[i]) ? 'color: #66cc33;' : 'color: #45b2ff;')); a.href = info.urlArr[i]; a.innerHTML = info.titleArr[i]; a.onmouseover = function(){this.style.color = '#ff45b2'; this.style.border = 'none';}; a.onmouseout = function(){this.style.color = ((location.href == this.href) ? '#66cc33' : '#45b2ff');}; var img = create_element('img', null, null, 'float: right;'); img.src = 'http://cdn.iconfinder.net/data/icons/uidesignicons/delete.png'; img.align = 'top'; img.onclick = function(){ var index = 0; var ret = confirm('是否删除该条目'); if(!ret) return; var imgs = document.getElementById('fav_body').getElementsByTagName('img'); for(index = 0; index < imgs.length; index++){ if(imgs[index] == this) break; } index = index / 2; delete_data(index); this.parentNode.parentNode.removeChild(this.parentNode); if(read_data().titleArr == null) document.getElementById('fav_close').click(); }; var img2 = create_element('img', null, null, 'float: right'); img2.src = 'http://cdn.iconfinder.net/data/icons/uidesignicons/settings.png'; img2.align = 'top'; img2.onclick = function(){ var index = 0; var imgs = document.getElementById('fav_body').getElementsByTagName('img'); for(index = 0; index < imgs.length; index++){ if(imgs[index] == this) break; } index = ((index + 1) / 2) - 1; var title = prompt('编辑标题', info.titleArr[index]); if(title == null) return; var url = prompt('编辑地址', info.urlArr[index]); if(url == null) return; info.titleArr[index] = title; info.urlArr[index] = url; update_data(index, title, url); alert('修改成功'); this.parentNode.getElementsByTagName('a')[0].innerHTML = title; this.parentNode.getElementsByTagName('a')[0].href = url; }; var br = create_element('br', null, null, null); div.appendChild(a); div.appendChild(img); div.appendChild(img2); div.appendChild(br.cloneNode(true)); content.appendChild(div); } create_dialog(content); } else alert('该站点没有收藏内容...'); } show_fav_address(); })();", 1, "fav_open", "Add To Bookmarks""
;Button, "fav_save"="Go to page, "javascript: (function(){ function stringToData(s){ if(s == null) return; s = s.replace(/\\/g, '').replace(/^%22/,'').replace(/%22$/,''); return JSON.parse(s); } function check_exist(data, dataArr){ var i; for(i = 0; i < dataArr.length; i++){ if(data == dataArr[i]) return true; } return false; } function add_data(title, url){ var titleArr = stringToData(localStorage.getItem('js_fav_title')) || new Array(); var urlArr = stringToData(localStorage.getItem('js_fav_url')) || new Array(); if(check_exist(url, urlArr)){ return false; } titleArr.push(title); urlArr.push(url); localStorage.setItem('js_fav_title', JSON.stringify(titleArr)); localStorage.setItem('js_fav_url', JSON.stringify(urlArr)); return true; } function add_fav_address(){ var url = location.href; var title = prompt('请输入标题', document.getSelection() || document.title); if(title == null) return; if(add_data(title, url) == true) alert('保存成功'); else alert('已经存在'); } add_fav_address(); })();", 1, "fav_save", "Add To Bookmarks""
Button, "TidyRead"=Go to page, "javascript:location.href=%22http://www.tidyread.com/td/index.php?r=site/read&url=%22+encodeURIComponent(document.location.href)+%22&title=%22+encodeURIComponent(document.title)", 1
Button, "Enhanced Reload"=Stop, , , "Enhanced Reload" | Reload + Reload all pages
Button, "撤消"="External action, , , , "Reload" | Reopen page, , , , "Reload" + Show hidden popup menu, "Closed Pages Menu""
Button, "添加书签"="External action, , , "添加书签", "Add To Bookmarks" | Add to bookmarks & Delay, 1 & Switch groups, "advanced_group""
Button, "手动播放Flash"="New page, , , "手动播放Flash", "swfon" & Go to page, "opera:config" & Delay, 1 & Go to page, "javascript:(function(){var oh=opera.getPreference('User Prefs','Enable On Demand Plugin'),yeah=(oh==1)?0:1;opera.setPreference('User Prefs','Enable On Demand Plugin',yeah);window.close()})();" > Set preference, "User Prefs|Enable On Demand Plugin=0", , "自动播放Flash", "swfoff" + Show popup menu, "Simple AdbDetails Menu""

[Document View Toolbar.style]
Button type=2
Button style=0
Large Images=0
Wrapping=1
Maximum Button Width=0
Grow To Fit=0
Mini Buttons=0

[Find Text Toolbar.content]
Platform Mac, Button, S_CONTENT_BLOCK_DONE="Cancel,,,,"Infobar Close Icon""
NamedSearch, tbs_FindSearch, -12
Button, S_SEARCH_PREV="Find Previous"
Button, S_SEARCH_NEXT="Find Next"
NamedCheckbox, MatchCase, D_FIND_TEXT_MATCH_CASE, , 12
Spacer1,,10
NamedCheckbox, WholeWord, D_FIND_TEXT_MATCH_WHOLE_WORD, , 12
Spacer0, 1
Label, ""
Button, "阅读辅助线"="Go to page, "javascript:/* Auto-Highlight Bookmarklet by Avi Halachmi- avihpit(at)yahoo(dot)com 2004-01-12 */(function(){  var d=false;  var id='_bookmarklet_highlight_with_mouse_';  d=document.getElementById(id);  if (d){    document.body.removeChild(d);  }else{    mydiv = document.createElement('div');    mydiv.id=id;    mydiv.zOrder=10000;    mydiv.style.position='fixed';    mydiv.style.height=100;    mydiv.style.left=0;    mydiv.style.right=0;    mydiv.style.borderWidth=2;    mydiv.style.borderRightWidth=10;    mydiv.style.borderLeftWidth=10;    mydiv.style.borderStyle='solid';    mydiv.style.borderColor='rgba(153, 234, 117, 0.6)';    mydiv.style.Opacity=0.1;    mydiv.style.backgroundColor='rgba(153, 134, 217, 0.2)';    range = document.createRange();    range.setStartAfter(document.body.lastChild,0);    range.insertNode(mydiv);    document.body.onmousemove=      function(e){        var x=false;        x=document.getElementById(id);        if (!x) return;        x.style.visibility='hidden';        x.style.top= e.clientY-50;        x.style.visibility='visible';      };  };})();", 1, , "Mail Compose Horizontal Line""
Button, "自动滚屏"="Go to page, "javascript:var marc=false; function AutoScroll() {if(marc==true)return; window.scrollBy(0,1); NextScroll = setTimeout('AutoScroll()', 120);window.onkeypress = StopScroll;} function StopScroll(e) {if(e.keyCode == 27){clearTimeout(NextScroll);};} AutoScroll();", , , "Extender Down Arrow" + Go to page, "javascript: void(marc=true)""
Button, "页面变暗"="Go to page, "javascript:(function () {var dark_layer = null; if(!(dark_layer = document.getElementById('dark_layer'))) {var oDiv = document.createElement('div'); oDiv.id = 'dark_layer'; var pageHeight = Math.max(document.body.scrollHeight, document.documentElement.scrollHeight, window.innerHeight); oDiv.style = 'position: absolute; top: 0; left: 0; width: 1px; height: ' + pageHeight + 'px; outline:rgba(0,0,0,0.2) solid 3000px;';document.body.appendChild(oDiv);} else {document.body.removeChild(dark_layer);} })();", , "页面变暗", "Mail Compose Clear Formatting""
Button, "NightCss"="Go to page, "javascript:(function(){var night=function(w){(function(d){var css='html{background:#333 !important}html *{background:none !important;color:#bbb !important;border-color:#333 !important;border-width:0 !important}html a,html a *{color:#5c8599 !important;text-decoration:underline !important}html a:visited,html a:visited *,html a:active,html a:active *{color:#525f66 !important}html a:hover,html a:hover *{color:#cef !important;background:#023 !important}html input,html select,html button,html textarea{background:#4d4c40 !important;border:1px solid #5c5a46 !important;border-top-color:#474531 !important;border-bottom-color:#7a7967 !important}html input[type=button],html input[type=submit],html input[type=reset],html input[type=image],html button{border-top-color:#7a7967 !important;border-bottom-color:#474531 !important}html input:focus,html select:focus,html option:focus,html button:focus,html textarea:focus{background:#5c5b3e !important;color:#fff !important;border-color:#474100 #665d00 #7a7849 !important;outline:2px solid #041d29 !important}html input[type=button]:focus,html input[type=submit]:focus,html input[type=reset]:focus,html input[type=image]:focus,html button:focus{border-color:#7a7849 #665d00 #474100 !important}html input[type=radio]{background:none !important;border-color:#333 !important;border-width:0 !important}html img[src],html input[type=image]{opacity:.5}html img[src]:hover,html input[type=image]:hover{opacity:1}html,html body{scrollbar-base-color:#4d4c40 !important;scrollbar-face-color:#5c5b3e !important;scrollbar-shadow-color:#5c5b3e !important;scrollbar-darkshadow-color:#474531 !important;scrollbar-track-color:#4d4c40 !important;scrollbar-arrow-color:#000 !important;scrollbar-3dlight-color:#7a7967 !important}';var s=d.getElementsByTagName('style');for(var i=0,si;si=s[i];i++){if(si.innerHTML==css){si.parentNode.removeChild(si);return}};var heads=d.getElementsByTagName('head');if(heads.length){var node=d.createElement('style');node.type='text/css';node.appendChild(d.createTextNode(css));heads[0].appendChild(node)}})(w.document); for(var i=0,f;f=w.frames[i];i++){try{arguments.callee(f)}catch(e){}}};night(window)})();", 1, , "Menu Chat""
Button, "编辑模式"="Go to page, "javascript:(function(){document.designMode=(document.designMode=='on')?'off':'on'})()", , "Edit mode", "News Read""
Button, "汉典"="Go to page, "javascript:void((function()%20{var%20element=document.createElement('script');%20element.setAttribute('src',%20'http://www.zdic.net/tools/zih.asp');%20document.body.appendChild(element);})())", 1, "汉典查词", "zdic""
Button, "天涯工具箱"=Show popup menu, "Tianya List", , , "tianya
Edit=Delay, 1, , "Quixapp" & Select all & Cut & Delay, 1 & Go to page, "javascript:Quix();function Quix(){var e=encodeURIComponent;var t=window.getSelection?window.getSelection():(document.getSelection?document.getSelection():(document.selection?document.selection.createRange().text:''));var c=window.prompt('Quix: Type `help` for a list of commands:');if(t!=''){if(c){c+=' '+t;}else{c=''+t;}}if(c){var u='http://quixapp.com/go/?c='+e(c)+'&t='+(document.title?e(document.title):'')+'&s='+'&v=080'+'&u='+(document.location?e(document.location):'');d=''+document.location;if(d.substr(0,4)!='http'){window.location=u+'&mode=direct';}else{heads=document.getElementsByTagName('head');if(c.substring(0,1)==' '){var w=window.open(u+'&mode=direct');w.focus();}else if(heads.length==0){window.location=u+'&mode=direct';}else{q=document.getElementById('quix');if(q){q.parentNode.removeChild(q);}sc=document.createElement('script');sc.src=u;sc.id='quix';sc.type='text/javascript';void(heads[0].appendChild(sc));}}}}", 1 & Delay, 1 & Paste & Ok
Button, S_CONTENT_BLOCK_DONE="Cancel,,,,"Infobar Close Icon""

[Start Toolbar.content]
Button, 376069807="Show popup menu, "Internal Popular List", , , "Top10""
Button, "豆瓣电台"="Go to page, "javascript:try{DBR.S()}catch(e){};if(!window.open('http://douban.fm/radio','D','height=186,width=420,toolbar=no,menubar=no,scrollbars=no,location=no,status=no')){location.href='http://douban.fm/radio'}", , , "douban" + Go to page, "javascript:try{DBR.S()}catch(e){};if(!window.open('http://ting.baidu.com/radio/','D','height=250,width=470,toolbar=no,menubar=no,scrollbars=no,location=no,status=no')){location.href='http://douban.fm/radio'}", , , "baidu""
Spacer, 1
Button, "分享"="Show hidden popup menu, "Simple Share Menu", , , "Menu Bookmarks""
Button, "Whois"="Go to page, "javascript:(function(){location.href = 'http://www.aizhan.com/siteall/' + location.hostname;})()", 1,,"whois" + Go to page, "javascript:(function(){location.href = 'http://whois.domaintools.com/' + location.hostname;})()", 1,,"whois""
Button, "视频解析"="Go to page, "http://www.flvcd.com/parse.php?kw=%u&flag=", , "视频解析", "Attachment Video" + Go to page, "javascript:void(window.open('opera:cache?domain='+(function(d){if(/^(?:\d{1,3}\.){3}\d{1,3}$/.test(d))return d;var a=d.split('.');var l=a.length;return(l<3)?d:(a[l-2]+'.'+a[l-1])})(location.hostname)+'&list=preview'));",,,"find"
Button, "站内搜索"="Go to page, "javascript:var ax=prompt('谷歌站内搜索\n请输入搜索关键字','');if(ax.length>0){window.open('http://www.google.com/search?hl=zh-CN&client=opera&q=site:'+encodeURIComponent(location.hostname)+' '+encodeURIComponent(ax))};void(0);", , , "Find" + go to page,"javascript:var ax=prompt('百度站内搜索\n请输入搜索关键字','');if(ax.length>0){window.open('http://www.baidu.com/s?wd=site:'+encodeURIComponent(location.hostname)+' '+encodeURIComponent(ax)+'&tn=cnopera&cl=3&ie=utf-8')};void(0);",,,"Find"
Button, "有道/Bing翻译"=Go to page, "javascript: void((function() {var element = document.createElement('script');element.id = 'outfox_seed_js';element.charset = 'utf-8',element.setAttribute('src', 'http://fanyi.youdao.com/web2/seed.js?' + Date.parse(new Date()));document.body.appendChild(element);})())",,,"youdao" + Go to page, "javascript:(function(){var s = document.createElement('script'); s.type = 'text/javascript'; s.src = 'http://labs.microsofttranslator.com/bookmarklet/default.aspx?f=js&to=zh-chs'; document.body.insertBefore(s, document.body.firstChild);})()", 1,,"bing"
Button, "Goo.gl/TinyUrl"=Go to page, "javascript:function iprl5(){var d=document,z=d.createElement('scr'+'ipt'),b=d.body,l=d.location;try{if(!b)throw(0);if (!l) {alert('请输入网址！');return;}d.title='(Shortening...) '+d.title;z.setAttribute('src','http://www.ruanyifeng.com/webapp/url_shortener_plugin.php?longUrl='+escape(l));b.appendChild(z);}catch(e){alert('请等待网页加载完毕！');}}iprl5();void(0)",,,"Extender Right Arrow" + Go to page, "http://tinyurl.com/create.php?url=%u",,,"tiny""

[Start Toolbar.alignment]
Alignment=2
Auto alignment=1
Old visible alignment=2
Collapse=1

[Start Toolbar.style]
Button type=2
Button style=0
Large Images=0
Wrapping=1
Maximum Button Width=0
Grow To Fit=0
Mini Buttons=0

[Pagebar Head.style]
Button type=2
Button style=0
Large Images=0
Wrapping=1
Maximum Button Width=0
Grow To Fit=0
Mini Buttons=0
Button Skin=Pagebar Head Button Skin

[Find Text Toolbar.style]
Button style=0
Large Images=0
Wrapping=0
Maximum Button Width=0
Grow To Fit=0
Mini Buttons=1
Mini Edit=1
Button Skin=Infobar Button Skin

[Hotlist Panel Selector.content]
Unite, 0
Widgets, 1
Bookmarks, 2
Notes, 3
Transfers, 4
Links, 5
History, 6
Info, 7
